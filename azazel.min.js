function extend(n,e){for(var t in e)n[t]=e[t];return n}function Event(n){this.name=n}function addHandler(n,e,t,o){n[e]||(n[e]=[]),o?n[e].unshift(t):n[e].push(t)}function removeHandler(n,e){var t=n.indexOf(e);t>=0&&n.splice(t,1)}function removeOnce(n,e){for(var t in n)removeHandler(n[t],e);delete e.__run_once}function extendMethods(n,e,t){e[t+"on"]=n.on.bind(n),e[t+"once"]=n.once.bind(n),e[t+"off"]=n.off.bind(n),e[t+"emit"]=n.emit.bind(n)}function Azazel(n,e){this.listeners={},n&&extendMethods(this,n,e||"")}Event.prototype.preventDefault=function(){this.defaultPrevented=!0},extend(Azazel.prototype,{on:function(n,e,t){var o=this.listeners;(n instanceof Array?n:n.split(/ +/)).forEach(function(n){addHandler(o,n,e,t)})},once:function(n,e,t){e.__run_once=!0;var o=this.listeners;(n instanceof Array?n:n.split(/ +/)).forEach(function(n){addHandler(o,n,e,t)})},emit:function(n,e,t){var o=this.listeners;(n instanceof Array?n:n.split(/ +/)).forEach(function(n){if(o[n])for(var r=new Event(n),i=[r].concat(e),f=o[n],a=0,c=f.length;a<c;a++)if(f[a].apply(t,i),f[a].__run_once&&(removeOnce(o,f[a]),a--,c--),r.defaultPrevented)return})},off:function(n,e){var t=this.listeners;(n instanceof Array?n:n.split(/ +/)).forEach(function(n){t[n]&&removeHandler(t[n],e)})}}),module.exports=Azazel;