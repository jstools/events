!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Azazel=t()}(this,function(){"use strict";function a(n,t){for(var o=n.length-1;0<=o;o--)t===n[o]&&n.splice(o,1)}function h(i,r,f){return function t(n,o,e){if(!1!==f&&!(o instanceof Function))throw new Error("listener should be a Function");if(n instanceof Array)return n.forEach(function(n){t(n,o,e)}),r;if("string"!=typeof n)throw new Error("event_name should be a string");return/ /.test(n)?t(n.split(/ +/),o,e):(i.apply(this,arguments),r)}}return function n(e,t){t=t||"";var i={},r={},f={};function u(n,t,o){i[n]=i[n]||[],o?i[n].unshift(t):i[n].push(t)}var o=h(u,e=e||(this instanceof n?this:{}));var c=h(function(n,t,o){r[n]=r[n]||[],o?r[n].unshift(t):r[n].push(t)},e);var s=h(function(n,t,o){f[n]||(f[n]=!0),i[n]&&i[n].forEach(function(n){n.apply(o,t||[])}),r[n]&&(function(n,t,o){for(var e in n.forEach(function(n){n.apply(o,t||[])}),r)r[e]!==n&&n.forEach(function(n){r[e]&&a(r[e],n)})}(r[n],t,o),delete r[n])},e,!1);return e[t+"on"]=o,e[t+"once"]=c,e[t+"watch"]=function(n,t,o){if(!(t instanceof Function))throw new Error("listener should be a Function");return f[n]&&t(),f[n]&&"once"===o||u(n,t,o),e},e[t+"emit"]=s,e[t+"off"]=h(function(n,t){i[n]&&a(i[n],t),r[n]&&a(r[n],t)}),e}});