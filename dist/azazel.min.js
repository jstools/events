!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Azazel=t()}(this,function(){"use strict";function n(n,t){if(n)for(var e=n.length-1;e>=0;e--)t.call(null,n[e],e)&&n.splice(e,1)}function t(n,t,e,r){var i=[].shift.call(t);return t=[].slice.call(t),"string"==typeof i&&(i=i.split(/\s+/)),i.forEach(function(r){n.apply(e,[r].concat(t))}),r}function e(e,r){function i(n,r,o){if(!(r instanceof Function))throw new Error("listener should be a Function");if(n instanceof Array)return t(i,arguments,this,e);if("string"!=typeof n)throw new Error("event_name should be a string");return/ /.test(n)?t(i,arguments,this,e):(u[n]=u[n]||[],o?u[n].unshift(r):u[n].push(r),e)}function o(n,t,e){var r=function(){s(n,r),t.apply(this,arguments)};return r.__once__=t,i(n,r,e)}function f(n,r,i){if(n instanceof Array)return t(f,arguments,this,e);if("string"!=typeof n)throw new Error("event_name should be a string");return/ /.test(n)?t(f,arguments,this,e):u[n]?(u[n].forEach(function(n){n.apply(i,r||[])}),e):e}function s(r,i){if(r instanceof Array)return t(s,arguments,this,e);if("string"!=typeof r)throw new Error("event_name should be a string");return/ /.test(r)?t(s,arguments,this,e):(n(u[r],function(n){return n===i||n.__once__===i}),e)}e=e||this,r=r||"";var u={};e[r+"on"]=i,e[r+"once"]=o,e[r+"emit"]=f,e[r+"off"]=s}return e});